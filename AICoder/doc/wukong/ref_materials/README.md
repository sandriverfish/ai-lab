# wukong-dl
Deep Learning for Wukong Project

## Product Requirement
### 1. 项目目标及范围
Wukong是一个SOP视觉引导及检查的产品，应用于工厂产线组装等领域，主要完成的功能：
* SOP（Standard Operation Procedure）作业指导书的导入；
* 拍照功能： 对安装在工厂产线的组装工位的组装产品（成品）进行拍照。
* 标记功能：对组装产品拍照的照片，标记需要进行组装视觉引导及检查的零件位置（在组装产品上）。一般存在多个零件，按照组装顺序进行标记。
* 视觉引导及检查功能：基于摄像头的图像，框出组装零件的位置，红色为未组装，绿色为完成（OK）,组装错误或超时为NG。
* 组装完成后，对组装结果进行评估，并生成报告。
* 对图像检查的补充说明：采用机器学习的方法，首先采集产品的照片进行预训练，能够识别产品以及产品不同立面（例如产品有前后、左右、上下等六个面），以及各个组装零件的位置。产品首先使用预训练模型完成视觉引导检查功能，后续随着产品的使用，可以对过程中积累的图像及标注数据进行新的训练。

### 2. 项目架构组件
Wukong项目硬件组成
* WK-1500: 基于Nvidia Jetson Xavier NX的边缘处理器，内置了四口千兆交换机，可以连接WK-T20终端；
   * 操作系统为Ubuntu 20.04，JetPack版本为5.1.4；
   * 安装PaddlePaddle-GPU 3.0.0-rc版本，PaddleX 3.0.0-rc版本；
   * Wukong应用软件（本项目需要开发）
* WK-T20: 基于Rockchip RK3576或RK3399的前端设备；
   * 安卓10操作系统；
   * Wukong端侧应用软件；
* 工业相机：选择迈德威视或海康的USB3.0工业相机；

### 应用模式1
WK-1500接1路～6路工业相机（USB3.0），通过HDMI接显示器，提供Wukong视觉引导及检查功能。

### 应用模式2
WK1500提供后台服务（模型推理），可以连接多台前端WK-T20。WK-T20接1路工业相机（USB3.0），通过HDMI接显示器，与WK-1500配合（基于webrtc连接Jetson，并且Jetson提供AI服务，完成视觉引导及检查功能。

需要分解项目任务，提前验证关键技术。

### 产品体验期待
从产线组装人员的使用来看：
* 当组装产品到达组装工作台，Wukong系统可以快速识别组装产品，并且可以准确定位零件的组装位置。屏幕显示出要安装的组装位置（绿色框标识），正确安装后，屏幕显示下一个零件组装位置的标识框引导。
* 组装过程中，组装产品可以随意在镜头视野范围内调整位置和角度，悟空系统需要正确的识别组装产品和零件位置。
* 组装过程是增加零件的过程，所以产品识别从基座开始，需要准确的识别产品。
* 组装过程中，除了对零件组装进行有无的引导及检查，还能够进一步识别错误的组装零件，例如螺丝头不一致（十字/一字等）、接插件的线序错误（可以根据颜色和方向判断)，每个组装零件位置的识别速度要求在100ms完成。
* 组装过程是按照顺序完成的，每个工序正确完成屏幕显示OK，并且可以播放柔和的声音提示。如果出现漏装或超时，以及错误安装则需要告警。

## 关键技术验证
主要包括：
* 适用于本项目的机器学习技术框架选择；
* 选定技术框架后，准备数据、模型调优(FINE TUNING)或训练; 由于缺乏数据集，可以选择公开的数据集跑完流程。注意：基于Jetson Xavier NX进行训练。
* 进行测试验证，主要考察一张图片的用时（产线上的操作对时间敏感）等，形成优化方案，评估是否可以用于实际。
* 假如验证成功，对于导入新项目，需要做什么准备工作？（如何准备产品照片、标注等）

以上验证可以在目录tools下创建相应的资料。

```
git config --global user.name "sandriverfish"
git config --global user.email "mc6066@outlook.com"
```